# Linux基礎
## はじめに
- linuxは，基本的にターミナルと呼ばれる，文字のみのインターフェースで"コマンド”と呼ばれる英単語の命令を使って操作して行く。
- コマンドはtabキーで補完でき，上下の矢印でコマンド履歴を出せる。

---

- echo: 指定したテキストを表示
  - ```echo "hello"```
- whoami: ログイン中の自分のユーザー名を表示
---

以上がコマンドの例である。

コマンドは<br>
```コマンド 引数　-オプション```<br>
のような形式で使用する。
- 引数: コマンドに渡す値。ファイル名やアドレスなどがそれに当たる。
- オプション: コマンドの機能を変更したりする。使えるオプションはコマンドにより異なる。省略可能。
  - 例: --version バージョンを表示するオプション。-v と省略可

## Linuxのディレクトリの構造
*ディレクトリとはフォルダのことである。

- /: 最上位のディレクトリ。WindowsでいうところのC:にあたる。
- /home: ユーザーディレクトリ。ここに様々なユーザーのディレクトリが存在する。
  - 自分がユーザ"clpwn"なら，/home/clpwnが自分のディレクトリ。
    - **~/と描いて略せる。**
- / や /home/clpwn, /home/clpwn/test.txt のような表記を**パス**という。

---

- /etc: システム上で最も重要なルートディレクトリの1つ。etc フォルダ(etcetera の略)は、OSで使用されるシステムファイルを保存する一般的な場所。
- /var: ログファイルのような，システム上で実行されているサービスまたはアプリケーションによって頻繁にアクセスまたは書き込まれるデータが格納される場所。ちなみに実行中のサービスやアプリケーションのログファイルは"/var/log"に書き込まれる
- /root: rootユーザ(Administratorのようなもの)のユーザディレクトリ。/homeディレクトリ下にないこと以外は他のユーザディレクトリとだいたい同じような構造をしている。
- /tmp: Temporary の意のとおり，一時的なデータを格納するために使用される。コンピュータのメモリと同様に、コンピュータを再起動するとこのフォルダの内容が消去される，という特性を持つ。

## ファイルとディレクトリの操作

- ls: 現在のディレクトリの中のファイルやディレクトリを表示(Listing Files)
  - -a: 隠しファイル(設定ファイル)など，全てを表示。
  - -l: 詳細情報を表示。
- cd: ディレクトリの移動(Changing Our Current Directory)
  - cd単体: ホームディレクトリに移動。直下にデスクトップ，ダウンロードなどのディレクトリがある。
  -  cd ../: １つ上のディレクトリに移動。 
  -  cd \<directory name>: 現在地にあるディレクトリの名前を指定し，そこに移動。
  -  cat: ファイルの中身を表示(Outputting the Contents of a File)
     -  cat \<filename> というように使う。
  -  pwd: 自分が今どのディレクトリにいるかを表示(Find the Path to Working Directory)

## 絶対パスと相対パス
- 絶対パス: 最上位からファイル名/ディレクトリ名まで，全てのパスを明確に書き表したもの。
- 相対パス: 自分の現在いるディレクトリを起点にファイル，ディレクトリ名を指定したもの。

---

例: 自分が今/home/clpwnにいるとする。そこにはファイル exam.txt とディレクトリ homeworksがあるとする。先程のやり方に倣えば

- cat exam.txt でファイルの中身を表示し，
- cd homeworks でhomeworks ディレクトリに移動

しようとするはずだ。これが相対パスである。

これを絶対パスで書き表すと

- cat /home/clpwn/exam.txt でファイルの中身を表示し，
- cd /home/clpwn/homeworks でhomeworks ディレクトリに移動

となる。

相対パスの方が一般的で楽だが，絶対パスを使えば自分のいるディレクトリ周辺にないファイルも指定できるので，覚えておくとよい。

## ファイルの検索
- find: ファイルの場所を検索。
  - find -name \<filename>: 指定した名前のファイルを検索。
    - "*.txt", "clp\*.png" のように， あやふやなところに"\*"を置くことで該当のものを全て検索することもできる(ワイルドカード)。
- grep: ファイルの中身を検索。
  - grep "\<text to search>" \<filename> というように検索をかけることができる。
  - 例: grep "ubuntu" linux.txt 

## リダイレクト

リダイレクトとは、標準入力の入力元、標準出力・標準エラー出力の出力先を変更するもの

---

- STDIN(standard input/標準入力)
   - →キーボードによる文字入力
- STDOUT(standard output/標準出力)
   - →ディスプレイによる文字出力
- STDERR(standard error output/標準エラー出力)
　- →ディスプレイによるエラーの出力(エラーメッセージなど)

---

- >, >> といったシェル演算子によってリダイレクトを行う。<, << などで出力の方向を変えたり，違う向きを組み合わせることもできる。

## シェル演算子
- &: バックグラウンドでコマンドを実行させる。 
  - 通常，入力したコマンドの処理が完了するまで次のコマンドを入力できない。
  - 大量ファイルのコピーなど，時間のかかる処理を行う時に使う。
- &&: コマンドを連続で処理する。
  - \<command1> && \<command2>
  - 例: sudo apt update && sudo apt install gcc
- \>: リダイレクト。一方のコマンドの実行結果の出力を，別の場所に送信する。(上書き)
  - 例: echo hey > welcome.txt
    - welcome.txtの中身に"hey"と書かれていることが確認できる。
  - ファイルデスクリプタについて
    -　デフォルトでは標準入力 STDINの結果を受け渡す.(0>)<br>
    リダイレクトを次のようにすることで出力文やエラー文を扱えるようになる。<br>
    - 1> : 標準出力 STDOUTを受け渡す。
    - 2> : 標準エラー STDERRを受け渡す。
- \>>: 基本の役割は上と同じ。相違点は，終端文字列を指定して標準入力を行う点。つまり，内容を上書くのではなく追加する。
  - 例: echo hello >> welcome.txt
    - welcome.txtの中の"hey"の下に"hello"と書かれていることが確認できる。 
- |: パイプライン。コマンドの入出力をコマンドに引き渡し，コマンドを組み合わせて処理をさせることができる。
  
  ```
  $ command | command
  ```


## SSH
- ssh: 別のデバイスをリモートで操作することができる。
  - ssh \<username>@\<ip address>
  - 単純にipアドレスを入力すればそのマシンに接続できるというわけではない。VPNの設定なども必要になってくる。

## Manual ページ
- man \<command>: そのコマンドの使い方を紹介するマニュアルページを表示する。
  - 基本英語なので頑張って読もう

## ファイルとディレクトリの操作2

以下のコマンドで
- ファイルとディレクトリを作成
- ファイルとディレクトリを移動
- ファイルとフォルダを削除

を行える。

- touch \<name>: ファイルの作成
- mkdir \<name>: ディレクトリの作成
- cp \<file or directory name>: ファイル，ディレクトリのコピーと移動
- mv: ファイル，ディレクトリの移動，名前変更
  - mv \<file | directory(移動元)> \<directory(移動先)> ファイル，またはディレクトリを指定したディレクトリに移動。
  - mv \<file> \<new filename>: ファイル名の変更。 
- rm　\<filename>: ファイルの削除。
  - rm -R \<directoryname>: ディレクトリの(中身も含めた)削除。
- file \<filename>: ファイルの種類を調べるコマンド。**CTFのReversing等においては初手で使う**ため，結構重要。

## 権限
ls -l をすると，画面左側に"rwxrwx---"のようなものがズラッと表示されたと思う。

これは各ファイル|ディレクトリの操作権限を表している。

|-|意味|
|---|---|
|r|Read/読み取り|
|w|Write/書き込み|
|x|eXecute/実行|
<br>

各部位の説明は以下の通り:

|- or d|rwx|rwx|rwx|
|---|---|---|---|
|-はファイル<br>dはディレクトリ|所有者の権限|所有者と同じグループ<br>に属しているユーザーの権限|それ以外の<br>ユーザの権限

## ユーザーの切り替え
- su \<username>: ユーザーの切り替えを行う。
  - -l(--login) オプションで，切り替え時に切り替え先のユーザーのホームディレクトリに移動する。
- **sudo \<command>**: 一時的にrootユーザの特権でコマンドを実行する。重要！

## エディタ
コマンドからvisual studio codeを扱う場合は
```code <filename>```とする。

同様にしてディレクトリも開ける。

ターミナル上で動くnanoやvim, 標準テキストエディタのmousepad?などもあるがここでは割愛する。

